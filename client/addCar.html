<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <h1>COMP 351 Group Project Car Management system</h1>
</head>

<body>


  <div id=cars>
    <div class="container">
      <form>
        <label for="Manufacturer">Car Manufacturer</label>
        <input type="text" id="Manufacturer" name="Manufacturer">

        <label for="Model">Car Model</label>
        <input type="text" id="Model" name="Model">

        <label for="Year">Car Year</label>
        <input type="number" id="Year" name="Year">

        <label for="Colour">Car Colour</label>
        <input type="text" id="colour" name="colour">

        <label for="Mileage">Car Mileage</label>
        <input type="text" id="Mileage" name="Mileage">

        <label for="price">Car Price</label>
        <input type="number" id="price" name="price">




      </form>
      <input type="submit" class="button button4" value="Add" onclick="save()">
      <a href="admin.html"><button class="button button3">Back</button></a>
    </div>
  </div>
</body>

</html>

<script>
  function save() {

    const Manufacturer = document.getElementById("Manufacturer").value;
    const Model = document.getElementById("Model").value;
    const Year = document.getElementById("Year").value;
    const Colour = document.getElementById("colour").value;
    const Mileage = document.getElementById("Mileage").value;
    const Price = document.getElementById("price").value;
    // const saveCar = {"id":0,"manufacturer":"Dodge","model":"dart","year":2014,"colour":"black","mileage":109000,"price":15000};

    if (confirm("Press OK to confirm info")) {
      const saveCar = { "manufacturer": Manufacturer, "model": Model, "year": Year, "colour": Colour, "mileage": Mileage, "price": Price };
      const xhttp = new XMLHttpRequest();
      xhttp.open("POST", "https://theocomp351website.herokuapp.com/savecar/", true);
      //xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');    
      car = JSON.stringify(saveCar);
      xhttp.send(car);
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          alert(this.responseText);
          window.location = "viewCars.html";
        }
      };
    }
  }

</script>